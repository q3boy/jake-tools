- data = typeof data !== 'undefined' ? data : {"instrumentation":"node-jscoverage","sloc":175,"hits":172,"misses":3,"coverage":98.28571428571429,"files":[{"filename":"config.js","coverage":100,"hits":31,"misses":0,"sloc":31,"source":{"1":{"source":"var config, fs, ini, merge, path, yaml,","coverage":1},"2":{"source":"  __slice = [].slice;","coverage":""},"3":{"source":"","coverage":""},"4":{"source":"fs = require('fs');","coverage":1},"5":{"source":"","coverage":""},"6":{"source":"path = require('path');","coverage":1},"7":{"source":"","coverage":""},"8":{"source":"ini = require('ini');","coverage":1},"9":{"source":"","coverage":""},"10":{"source":"yaml = require('js-yaml');","coverage":1},"11":{"source":"","coverage":""},"12":{"source":"merge = function(o1, o2) {","coverage":1},"13":{"source":"  var k;","coverage":21},"14":{"source":"  for (k in o2) {","coverage":21},"15":{"source":"    if (typeof o2[k] === 'object' &amp;&amp; !(o2[k] instanceof Array) &amp;&amp; !(o2[k] instanceof Buffer)) {","coverage":45},"16":{"source":"      if (typeof o1[k] !== 'object' || o1[k] instanceof Array || o1[k] instanceof Buffer) {","coverage":10},"17":{"source":"        o1[k] = o2[k];","coverage":6},"18":{"source":"      } else {","coverage":""},"19":{"source":"        merge(o1[k], o2[k]);","coverage":4},"20":{"source":"      }","coverage":""},"21":{"source":"    } else {","coverage":""},"22":{"source":"      o1[k] = o2[k];","coverage":35},"23":{"source":"    }","coverage":""},"24":{"source":"  }","coverage":""},"25":{"source":"  return o1;","coverage":21},"26":{"source":"};","coverage":""},"27":{"source":"","coverage":""},"28":{"source":"config = function() {","coverage":1},"29":{"source":"  var arg, args, c, p, _i, _len;","coverage":8},"30":{"source":"  args = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":8},"31":{"source":"  c = {};","coverage":8},"32":{"source":"  for (_i = 0, _len = args.length; _i &lt; _len; _i++) {","coverage":8},"33":{"source":"    arg = args[_i];","coverage":17},"34":{"source":"    if (typeof arg === 'string') {","coverage":17},"35":{"source":"      p = arg[0] === '/' ? arg : path.join(process.cwd(), arg);","coverage":3},"36":{"source":"      merge(c, (function() {","coverage":3},"37":{"source":"        switch (path.extname(p)) {","coverage":3},"38":{"source":"          case '.ini':","coverage":""},"39":{"source":"            return ini.parse(fs.readFileSync(p).toString());","coverage":1},"40":{"source":"          case '.json':","coverage":""},"41":{"source":"            return JSON.parse(fs.readFileSync(p));","coverage":1},"42":{"source":"          case '.yml':","coverage":""},"43":{"source":"            return yaml.load(fs.readFileSync(p));","coverage":1},"44":{"source":"        }","coverage":""},"45":{"source":"      })());","coverage":""},"46":{"source":"    } else {","coverage":""},"47":{"source":"      merge(c, arg);","coverage":14},"48":{"source":"    }","coverage":""},"49":{"source":"  }","coverage":""},"50":{"source":"  Object.freeze(c);","coverage":8},"51":{"source":"  return c;","coverage":8},"52":{"source":"};","coverage":""},"53":{"source":"","coverage":""},"54":{"source":"module.exports = config;","coverage":1}}},{"filename":"event-stream.js","coverage":98.63013698630137,"hits":72,"misses":1,"sloc":73,"source":{"1":{"source":"var EventStream, events,","coverage":1},"2":{"source":"  __hasProp = {}.hasOwnProperty,","coverage":""},"3":{"source":"  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },","coverage":7},"4":{"source":"  __slice = [].slice;","coverage":""},"5":{"source":"","coverage":""},"6":{"source":"events = require(\"events\");","coverage":1},"7":{"source":"","coverage":""},"8":{"source":"EventStream = (function(_super) {","coverage":1},"9":{"source":"","coverage":""},"10":{"source":"  __extends(EventStream, _super);","coverage":1},"11":{"source":"","coverage":""},"12":{"source":"  function EventStream() {","coverage":1},"13":{"source":"    var cbs;","coverage":6},"14":{"source":"    cbs = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":6},"15":{"source":"    this.list = [];","coverage":6},"16":{"source":"    this.pointer = 0;","coverage":6},"17":{"source":"    this.flag = 0;","coverage":6},"18":{"source":"    this.container = (function() {","coverage":6},"19":{"source":"      var args, cb, cb1, type, _i, _len, _ref;","coverage":18},"20":{"source":"      args = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":18},"21":{"source":"      if (this.stopped) {","coverage":18},"22":{"source":"        this.emit('stopped', this.container);","coverage":1},"23":{"source":"        return;","coverage":1},"24":{"source":"      }","coverage":""},"25":{"source":"      if (this.pointer &gt;= this.list.length) {","coverage":17},"26":{"source":"        this.emit('drain', this.container);","coverage":1},"27":{"source":"        return;","coverage":1},"28":{"source":"      }","coverage":""},"29":{"source":"      if (--this.flag &gt; 0) {","coverage":16},"30":{"source":"        return;","coverage":2},"31":{"source":"      }","coverage":""},"32":{"source":"      _ref = this.list[this.pointer], type = _ref[0], cb = _ref[1];","coverage":14},"33":{"source":"      this.pointer++;","coverage":14},"34":{"source":"      if (type === 'seq') {","coverage":14},"35":{"source":"        cb.apply(this.container, args);","coverage":12},"36":{"source":"      } else if (type === 'par') {","coverage":2},"37":{"source":"        this.flag = cb.length;","coverage":2},"38":{"source":"        for (_i = 0, _len = cb.length; _i &lt; _len; _i++) {","coverage":2},"39":{"source":"          cb1 = cb[_i];","coverage":4},"40":{"source":"          cb1.apply(this.container, args);","coverage":4},"41":{"source":"        }","coverage":""},"42":{"source":"      }","coverage":""},"43":{"source":"    }).bind(this);","coverage":""},"44":{"source":"    if (cbs.length === 0) {","coverage":6},"45":{"source":"      return;","coverage":0},"46":{"source":"    }","coverage":""},"47":{"source":"    this.add.apply(this, cbs);","coverage":6},"48":{"source":"  }","coverage":""},"49":{"source":"","coverage":""},"50":{"source":"  EventStream.prototype.add = function() {","coverage":1},"51":{"source":"    var cb, cbs, _i, _len;","coverage":6},"52":{"source":"    cbs = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":6},"53":{"source":"    for (_i = 0, _len = cbs.length; _i &lt; _len; _i++) {","coverage":6},"54":{"source":"      cb = cbs[_i];","coverage":15},"55":{"source":"      if (typeof cb === 'function') {","coverage":15},"56":{"source":"        this.seq(cb);","coverage":13},"57":{"source":"      } else if (typeof cb === 'object' &amp;&amp; cb instanceof Array) {","coverage":2},"58":{"source":"        this.par.apply(this, cb);","coverage":2},"59":{"source":"      }","coverage":""},"60":{"source":"    }","coverage":""},"61":{"source":"    return this;","coverage":6},"62":{"source":"  };","coverage":""},"63":{"source":"","coverage":""},"64":{"source":"  EventStream.prototype.seq = function() {","coverage":1},"65":{"source":"    var cb, cbs, _i, _len;","coverage":13},"66":{"source":"    cbs = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":13},"67":{"source":"    for (_i = 0, _len = cbs.length; _i &lt; _len; _i++) {","coverage":13},"68":{"source":"      cb = cbs[_i];","coverage":13},"69":{"source":"      this.list.push(['seq', cb]);","coverage":13},"70":{"source":"    }","coverage":""},"71":{"source":"    return this;","coverage":13},"72":{"source":"  };","coverage":""},"73":{"source":"","coverage":""},"74":{"source":"  EventStream.prototype.par = function() {","coverage":1},"75":{"source":"    var cbs;","coverage":2},"76":{"source":"    cbs = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":2},"77":{"source":"    this.list.push(['par', cbs]);","coverage":2},"78":{"source":"    return this;","coverage":2},"79":{"source":"  };","coverage":""},"80":{"source":"","coverage":""},"81":{"source":"  EventStream.prototype.run = function() {","coverage":1},"82":{"source":"    var args;","coverage":6},"83":{"source":"    args = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":6},"84":{"source":"    this.container.apply(this, args);","coverage":6},"85":{"source":"    return this;","coverage":6},"86":{"source":"  };","coverage":""},"87":{"source":"","coverage":""},"88":{"source":"  EventStream.prototype.stop = function() {","coverage":1},"89":{"source":"    this.stopped = true;","coverage":1},"90":{"source":"    this.emit('stop');","coverage":1},"91":{"source":"    return this;","coverage":1},"92":{"source":"  };","coverage":""},"93":{"source":"","coverage":""},"94":{"source":"  return EventStream;","coverage":1},"95":{"source":"","coverage":""},"96":{"source":"})(events.EventEmitter);","coverage":""},"97":{"source":"","coverage":""},"98":{"source":"module.exports = function() {","coverage":1},"99":{"source":"  var args;","coverage":6},"100":{"source":"  args = 1 &lt;= arguments.length ? __slice.call(arguments, 0) : [];","coverage":6},"101":{"source":"  return (function(func, args, ctor) {","coverage":6},"102":{"source":"    ctor.prototype = func.prototype;","coverage":6},"103":{"source":"    var child = new ctor, result = func.apply(child, args), t = typeof result;","coverage":6},"104":{"source":"    return t == \"object\" || t == \"function\" ? result || child : child;","coverage":6},"105":{"source":"  })(EventStream, args, function(){});","coverage":""},"106":{"source":"};","coverage":""}}},{"filename":"require-parse.js","coverage":97.82608695652173,"hits":45,"misses":1,"sloc":46,"source":{"1":{"source":"var fs, jsp, parse, path, pro, searchAst, util;","coverage":1},"2":{"source":"","coverage":""},"3":{"source":"fs = require(\"fs\");","coverage":1},"4":{"source":"","coverage":""},"5":{"source":"path = require(\"path\");","coverage":1},"6":{"source":"","coverage":""},"7":{"source":"util = require(\"util\");","coverage":1},"8":{"source":"","coverage":""},"9":{"source":"jsp = require(\"uglify-js\").parser;","coverage":1},"10":{"source":"","coverage":""},"11":{"source":"pro = require(\"uglify-js\").uglify;","coverage":1},"12":{"source":"","coverage":""},"13":{"source":"searchAst = function(ast, file) {","coverage":1},"14":{"source":"  var flag, flagd, modules, names, pattd, runAst, search, stack;","coverage":2},"15":{"source":"  modules = [];","coverage":2},"16":{"source":"  stack = '';","coverage":2},"17":{"source":"  flagd = flag = 0;","coverage":2},"18":{"source":"  names = ['call', 'name', 'require'];","coverage":2},"19":{"source":"  pattd = '011';","coverage":2},"20":{"source":"  runAst = function(ast) {","coverage":2},"21":{"source":"    var ast1, code;","coverage":8},"22":{"source":"    ['toplevel', [['var', [['aa', [\"binary\", \"+\", [\"name\", \"__dirname\"], [\"string\", \"reqb\"]]]]]]];","coverage":8},"23":{"source":"    ['toplevel', [[\"var\", [[\"bb\", [\"string\", \"123\"]]]]]];","coverage":8},"24":{"source":"    ast1 = ['toplevel', [['var', [['__$return_value', ast[0]]]]]];","coverage":8},"25":{"source":"    code = pro.gen_code(ast1);","coverage":8},"26":{"source":"    return new Function('__dirname', '__filename', 'process', code + \";return __$return_value\")(path.dirname(file), file, process);","coverage":8},"27":{"source":"  };","coverage":""},"28":{"source":"  search = function(tree, d) {","coverage":2},"29":{"source":"    var node, _i, _len;","coverage":52},"30":{"source":"    if (d == null) {","coverage":52},"31":{"source":"      d = 0;","coverage":0},"32":{"source":"    }","coverage":""},"33":{"source":"    if (flag === pattd.length &amp;&amp; stack === pattd) {","coverage":52},"34":{"source":"      modules.push(runAst(tree));","coverage":8},"35":{"source":"      stack = '';","coverage":8},"36":{"source":"      flag = flagd = 0;","coverage":8},"37":{"source":"      return;","coverage":8},"38":{"source":"    }","coverage":""},"39":{"source":"    for (_i = 0, _len = tree.length; _i &lt; _len; _i++) {","coverage":44},"40":{"source":"      node = tree[_i];","coverage":95},"41":{"source":"      if (typeof node === 'object' &amp;&amp; node instanceof Array) {","coverage":95},"42":{"source":"        search(node, d + 1);","coverage":50},"43":{"source":"      } else {","coverage":""},"44":{"source":"        if (node !== names[flag]) {","coverage":45},"45":{"source":"          stack = '';","coverage":19},"46":{"source":"          flag = flagd = 0;","coverage":19},"47":{"source":"        }","coverage":""},"48":{"source":"        if (node === names[flag]) {","coverage":45},"49":{"source":"          if (flagd === 0) {","coverage":30},"50":{"source":"            flagd = d;","coverage":13},"51":{"source":"          }","coverage":""},"52":{"source":"          stack += \"\" + (d - flagd);","coverage":30},"53":{"source":"          flag++;","coverage":30},"54":{"source":"        }","coverage":""},"55":{"source":"      }","coverage":""},"56":{"source":"    }","coverage":""},"57":{"source":"  };","coverage":""},"58":{"source":"  search(ast, 0);","coverage":2},"59":{"source":"  return modules;","coverage":2},"60":{"source":"};","coverage":""},"61":{"source":"","coverage":""},"62":{"source":"parse = function(code, file) {","coverage":1},"63":{"source":"  return searchAst(jsp.parse(code), file);","coverage":2},"64":{"source":"};","coverage":""},"65":{"source":"","coverage":""},"66":{"source":"module.exports = parse;","coverage":1}}},{"filename":"util.js","coverage":96,"hits":24,"misses":1,"sloc":25,"source":{"1":{"source":"var fs, mkdirp, path;","coverage":1},"2":{"source":"","coverage":""},"3":{"source":"fs = require('fs');","coverage":1},"4":{"source":"","coverage":""},"5":{"source":"path = require('path');","coverage":1},"6":{"source":"","coverage":""},"7":{"source":"mkdirp = require(\"mkdirp\").sync;","coverage":1},"8":{"source":"","coverage":""},"9":{"source":"exports.mkdirp = function(dirpath) {","coverage":1},"10":{"source":"  if (!fs.existsSync(dirpath)) {","coverage":4},"11":{"source":"    mkdirp(dirpath, '0755');","coverage":1},"12":{"source":"  } else if (!fs.statSync(dirpath).isDirectory()) {","coverage":3},"13":{"source":"    throw new Error(\"\" + dirpath + \" is not a directory.\");","coverage":1},"14":{"source":"  }","coverage":""},"15":{"source":"};","coverage":""},"16":{"source":"","coverage":""},"17":{"source":"exports.isDir = function(p) {","coverage":1},"18":{"source":"  return fs.existsSync(p) &amp;&amp; fs.statSync(p).isDirectory();","coverage":11},"19":{"source":"};","coverage":""},"20":{"source":"","coverage":""},"21":{"source":"exports.rmdirp = function(p) {","coverage":1},"22":{"source":"  var file, files, p1, _i, _len;","coverage":4},"23":{"source":"  if (!exports.isDir(p)) {","coverage":4},"24":{"source":"    return;","coverage":0},"25":{"source":"  }","coverage":""},"26":{"source":"  files = fs.readdirSync(p);","coverage":4},"27":{"source":"  if (!files.length) {","coverage":4},"28":{"source":"    fs.rmdirSync(p);","coverage":2},"29":{"source":"  } else {","coverage":""},"30":{"source":"    for (_i = 0, _len = files.length; _i &lt; _len; _i++) {","coverage":2},"31":{"source":"      file = files[_i];","coverage":3},"32":{"source":"      p1 = path.join(p, file);","coverage":3},"33":{"source":"      if (exports.isDir(p1)) {","coverage":3},"34":{"source":"        exports.rmdirp(p1);","coverage":2},"35":{"source":"      } else {","coverage":""},"36":{"source":"        fs.unlinkSync(p1);","coverage":1},"37":{"source":"      }","coverage":""},"38":{"source":"    }","coverage":""},"39":{"source":"  }","coverage":""},"40":{"source":"  fs.rmdirSync(p);","coverage":2},"41":{"source":"};","coverage":""}}}],"stats":{"suites":9,"tests":20,"passes":19,"pending":0,"failures":1,"start":"2012-09-26T03:00:15.455Z","end":"2012-09-26T03:00:15.539Z","duration":84},"tests":[{"title":"simple config","fullTitle":"Config Merge simple config","duration":3},{"title":"with array","fullTitle":"Config Merge with array","duration":1},{"title":"with buffer","fullTitle":"Config Merge with buffer","duration":1},{"title":"with deep object","fullTitle":"Config Merge with deep object","duration":1},{"title":"type overwrite","fullTitle":"Config Merge type overwrite","duration":1},{"title":"ini file","fullTitle":"Config File Format ini file","duration":3},{"title":"json file","fullTitle":"Config File Format json file","duration":1},{"title":"yaml file","fullTitle":"Config File Format yaml file","duration":11},{"title":"sync","fullTitle":"Event Stream Test Sequence Test sync","duration":3},{"title":"async","fullTitle":"Event Stream Test Sequence Test async","duration":4},{"title":"mixed","fullTitle":"Event Stream Test Sequence Test mixed","duration":9},{"title":"prepend","fullTitle":"Event Stream Test Parallel Test prepend","duration":2},{"title":"append","fullTitle":"Event Stream Test Parallel Test append","duration":4},{"title":"stop","fullTitle":"Event Stream Test Parallel Test stop","duration":16},{"title":"parse simple code","fullTitle":"Require Parse Test parse simple code","duration":4},{"title":"parse expression code","fullTitle":"Require Parse Test parse expression code","duration":6},{"title":"make subdir","fullTitle":"Util mkdirp make subdir","duration":1},{"title":"make deep subdir","fullTitle":"Util mkdirp make deep subdir"},{"title":"do nothing when exists","fullTitle":"Util mkdirp do nothing when exists","duration":5},{"title":"error when exists and not dir","fullTitle":"Util mkdirp error when exists and not dir","duration":3}],"failures":[{"title":"make deep subdir","fullTitle":"Util mkdirp make deep subdir"}],"passes":[{"title":"simple config","fullTitle":"Config Merge simple config","duration":3},{"title":"with array","fullTitle":"Config Merge with array","duration":1},{"title":"with buffer","fullTitle":"Config Merge with buffer","duration":1},{"title":"with deep object","fullTitle":"Config Merge with deep object","duration":1},{"title":"type overwrite","fullTitle":"Config Merge type overwrite","duration":1},{"title":"ini file","fullTitle":"Config File Format ini file","duration":3},{"title":"json file","fullTitle":"Config File Format json file","duration":1},{"title":"yaml file","fullTitle":"Config File Format yaml file","duration":11},{"title":"sync","fullTitle":"Event Stream Test Sequence Test sync","duration":3},{"title":"async","fullTitle":"Event Stream Test Sequence Test async","duration":4},{"title":"mixed","fullTitle":"Event Stream Test Sequence Test mixed","duration":9},{"title":"prepend","fullTitle":"Event Stream Test Parallel Test prepend","duration":2},{"title":"append","fullTitle":"Event Stream Test Parallel Test append","duration":4},{"title":"stop","fullTitle":"Event Stream Test Parallel Test stop","duration":16},{"title":"parse simple code","fullTitle":"Require Parse Test parse simple code","duration":4},{"title":"parse expression code","fullTitle":"Require Parse Test parse expression code","duration":6},{"title":"make subdir","fullTitle":"Util mkdirp make subdir","duration":1},{"title":"do nothing when exists","fullTitle":"Util mkdirp do nothing when exists","duration":5},{"title":"error when exists and not dir","fullTitle":"Util mkdirp error when exists and not dir","duration":3}]}
